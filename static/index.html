<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ask Fez-GPT</title>
<style>
body{margin:0;font-family:system-ui;background:#0f172a;color:white;display:flex;flex-direction:column;height:100vh}
header{padding:14px;background:#020617;text-align:center;font-size:20px}
#chat{flex:1;overflow-y:auto;padding:20px}
.msg{max-width:70%;padding:12px 16px;border-radius:14px;margin-bottom:12px}
.user{background:#2563eb;margin-left:auto}
.bot{background:#1e293b}
#input{display:flex;padding:14px;background:#020617}
input{flex:1;padding:12px;border:none;border-radius:8px;background:#0f172a;color:white;font-size:16px}
button{margin-left:10px;padding:12px 16px;border:none;border-radius:8px;background:#22c55e;font-weight:bold}
</style>
</head>
<body>
<header>Ask Fez-GPT</header>
<div id="chat"></div>
<div id="input">
  <input id="q" placeholder="Ask about your trip..." />
  <button onclick="send()">Send</button>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("q");

function add(text, cls){
  const d=document.createElement("div");
  d.className="msg "+cls;
  d.innerText=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const text=input.value.trim();
  if(!text) return;
  add(text,"user");
  input.value="";
  const loading=document.createElement("div");
  loading.className="msg bot";
  loading.innerText="Thinking...";
  chat.appendChild(loading);

  try{
    const r=await fetch("/ask",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({question:text})
    });
    const j=await r.json();
    loading.remove();
    add(j.answer || "No response","bot");
  }catch(e){
    loading.remove();
    add("Server error","bot");
  }
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter") send();
});
</script>
</body>
</html>
